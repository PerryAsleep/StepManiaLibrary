# Patterns 

Patterns are automatically generated sequences of steps within a chart. Patterns use a regular rhythm and can only be used to generate streams of `SameArrow` and `NewArrow` [StepTypes](StepTypes.md). Patterns are generated by creating a [PerformedChart](PerformedChart.md) using both a [Pattern Configuration](#pattern-configuration) and a [PerformedChart Configuration](PerformedChart.md#performedchart-configuration). The rules for how these configurations are used to generate steps are described under [PerformedChart Determination](PerformedChart.md#performedchart-determination).

# Pattern Configuration

## Example Configuration

<details>
	<summary>Example</summary>

```json5
{
	"BeatSubDivision": 4,
	"StartingFootChoice": "Specified",
	"StartingFootSpecified": 0,
	"LeftFootStartChoice": "AutomaticSameOrNewLane",
	"LeftFootStartLaneSpecified": 0,
	"LeftFootEndChoice": "AutomaticSameOrNewLaneAsFollowing",
	"LeftFootEndLaneSpecified": 0,
	"RightFootStartChoice": "AutomaticSameOrNewLane",
	"RightFootStartLaneSpecified": 0,
	"RightFootEndChoice": "AutomaticSameOrNewLaneAsFollowing",
	"RightFootEndLaneSpecified": 0,
	"SameArrowStepWeight": 36,
	"NewArrowStepWeight": 64,
	"StepTypeCheckPeriod": 0,
	"LimitSameArrowsInARowPerFoot": true,
	"MaxSameArrowsInARowPerFoot": 3
},
```
</details>

### `BeatSubDivision`

Number (integer) type. The frequency of the steps in the pattern expressed as a number of steps per beat, assuming a 4/4 time signature. `4` corresponds 1/16 notes.

### `StartingFootChoice`

String type. How the starting foot in the pattern should be chosen. Valid `StartingFootChoice` values are:
- `"Specified"`: The starting foot will be taken from the value specified by `StartingFootSpecified`.
- `"Automatic"`: The starting foot will be determined by the the steps surrounding the pattern.
- `"Random"`: The starting foot will be chosen randomly.

### `StartingFootSpecified`

Number (integer) type. The starting foot to use when the `StartingFootChoice` is `"Specified"`. `0` is left and `1` is right.

### `LeftFootStartChoice` and `RightFootStartChoice`

String type. Which lane the foot in question should start on. Valid values are:
- `"AutomaticSameLane"`: Choose a starting lane automatically by having the foot step on the same lane it is already on.
- `"AutomaticNewLane"`: Choose a starting lane automatically by having the foot step on a new lane from the lane it is already on.
- `"AutomaticSameOrNewLane"`: Choose a starting lane automatically by having the foot step on either the same lane it is already on, or a new lane.
- `"SpecifiedLane"`: Use the lane specified by `LeftFootStartLaneSpecified` or `RightFootStartLaneSpecified`.

### `LeftFootStartLaneSpecified` and `RightFootStartLaneSpecified`

Number (integer) type. The lane to use for the foot's first step when `LeftFootStartChoice` or `RightFootStartChoice` are `"SpecifiedLane"`.

### `LeftFootEndChoice` and `RightFootEndChoice`

String type. Which lane the given foot should end on. Valid values are:
- `"AutomaticIgnoreFollowingSteps"`: Choose an ending lane automatically with no consideration given to any following steps.
- `"AutomaticSameLaneToFollowing"`: Choose an ending lane automatically by ending on the same lane as the foot's following step.
- `"AutomaticNewLaneToFollowing"`: Choose an ending lane automatically by ending on a lane that can step to the foot's following lane.
- `"AutomaticSameOrNewLaneAsFollowing"`: Choose an ending lane automatically by ending either on the same as the foot's following step, or on a lane that can step to the foot's following lane.
- `"SpecifiedLane"`: Use the lane specified by `LeftFootEndLaneSpecified` or `RightFootEndLaneSpecified`.

### `LeftFootEndLaneSpecified` and `RightFootEndLaneSpecified`

Number (integer) type. The lane to use for the given foot's last step when `LeftFootEndChoice` or `RightFootEndChoice` are `"SpecifiedLane"`.

### `SameArrowStepWeight` and `NewArrowStepWeight`

Number (integer) type. These values define the relative weights of `SameArrow` and `NewArrow` [StepTypes](StepTypes.md) that the pattern should use. These values do not need to sum to any particular value.

### `StepTypeCheckPeriod`

Number (integer) type. A period measured in number of steps at which the `SameArrowStepWeight` and `NewArrowStepWeight` should be examined. Setting to this anything under `2` will result in continuous evaluation. This may result in patterns which are unpleasantly regular in their usage of these [StepTypes](StepTypes.md). For example if a Pattern should use half `SameArrow` and half `NewArrow` steps and it were checked continuously, with no other restrictions that pattern would continually alternate between a `SameArrow` and `NewArrow` step. When `StepTypeCheckPeriod` is set to a larger value then it allows for more randomness in the individual [StepTypes](StepTypes.md) while still maintaining an overall distribution that matches the specified `SameArrowStepWeight` and `NewArrowStepWeight` values.

### `LimitSameArrowsInARowPerFoot`

Boolean type. If `true` then `MaxSameArrowsInARowPerFoot` will be used to prefer paths which do not exceed the specified number of `SameArrow` steps in a row per foot.

### `MaxSameArrowsInARowPerFoot`

Number (integer) type. If `LimitSameArrowsInARowPerFoot` is `true` then this will be used to prefer paths which do not exceed this many `SameArrow` steps in a row per foot.